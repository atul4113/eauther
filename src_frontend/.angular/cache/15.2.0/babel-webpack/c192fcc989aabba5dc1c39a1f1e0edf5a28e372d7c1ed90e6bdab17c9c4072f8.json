{"ast":null,"code":"import { AccountsSettings } from '../../model/accounts-settings';\nimport { PathsService } from '../../../common/service';\nimport { AccountsService } from '../../service/accounts.service';\nimport { TranslationsService } from \"../../../common/service\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../common/service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction AccountsLoginComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"getLabel\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, ctx_r0.translations, \"plain.accounts.login.panel.enter_password\"), \" \");\n  }\n}\nvar ACCOUNTS_LOGIN_PATH = '/accounts/login';\nvar AccountsLoginComponent = /** @class */function () {\n  function AccountsLoginComponent(_paths, _translations) {\n    this._paths = _paths;\n    this._translations = _translations;\n    this.DEFAULT_REDIRECT_URL = '/corporate';\n    this.loginSettings = new AccountsSettings();\n    this.previousPath = this.DEFAULT_REDIRECT_URL;\n    this.error = false;\n    this.rememberMe = false;\n  }\n  AccountsLoginComponent.prototype.ngOnInit = function () {\n    var _this = this;\n    this._translations.getTranslations().subscribe(function (t) {\n      return _this.translations = t;\n    });\n    var next = this._paths.getParameterByName('next');\n    if (next) {\n      this.setPreviousPath(next);\n    } else {\n      this.setPreviousPath();\n      this._paths.onChange().subscribe(function () {\n        if (_this._paths.getPreviousPath()) {\n          _this.error = false;\n        }\n        _this.setPreviousPath();\n      });\n    }\n    if (document.referrer.indexOf(ACCOUNTS_LOGIN_PATH) !== -1) {\n      this.error = true;\n    }\n  };\n  AccountsLoginComponent.prototype.setPreviousPath = function (next) {\n    var previousPath = next ? next : this.DEFAULT_REDIRECT_URL;\n    if (!previousPath || previousPath === ACCOUNTS_LOGIN_PATH) {\n      previousPath = this.DEFAULT_REDIRECT_URL;\n    } else if (previousPath.indexOf('/') !== 0) {\n      previousPath = '/' + previousPath;\n    }\n    this.previousPath = previousPath;\n  };\n  AccountsLoginComponent.ɵfac = function AccountsLoginComponent_Factory(t) {\n    return new (t || AccountsLoginComponent)(i0.ɵɵdirectiveInject(i1.PathsService), i0.ɵɵdirectiveInject(i1.TranslationsService));\n  };\n  AccountsLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AccountsLoginComponent,\n    selectors: [[\"ng-component\"]],\n    features: [i0.ɵɵProvidersFeature([AccountsService])],\n    decls: 49,\n    vars: 33,\n    consts: [[\"mdl\", \"\", \"id\", \"accounts-login\"], [1, \"title\"], [1, \"page-content\", 3, \"putFooterBottom\"], [\"ngNoForm\", \"\", \"method\", \"post\", \"name\", \"login\", 3, \"action\"], [\"class\", \"error\", 4, \"ngIf\"], [1, \"mdl-list\"], [1, \"mdl-list__item\"], [1, \"mdl-list__item-primary-content\"], [1, \"material-icons\", \"mdl-list__item-icon\"], [\"matInput\", \"\", \"name\", \"username\", \"id\", \"username\", 3, \"placeholder\"], [\"matInput\", \"\", \"name\", \"password\", \"id\", \"password\", \"type\", \"password\", 3, \"placeholder\"], [1, \"mdl-textfield\", \"mdl-js-textfield\"], [\"color\", \"primary\", 3, \"checked\", \"change\"], [\"id\", \"remember-me\", \"type\", \"checkbox\", \"name\", \"remember_me\", 1, \"hidden\", 3, \"ngModel\"], [\"type\", \"submit\", 1, \"mdl-button\", \"mdl-js-button\", \"mdl-button--raised\", \"mdl-button--accent\", \"custom-login-button\"], [\"href\", \"/user/reset_password\", \"mat-button\", \"\", 1, \"mdl-button\", \"mdl-js-button\", \"mdl-button--primary\"], [\"href\", \"/accounts/register/\", \"mat-button\", \"\", 1, \"mdl-button\", \"mdl-js-button\", \"mdl-button--primary\"], [1, \"error\"]],\n    template: function AccountsLoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0)(1, \"page-title-bar\")(2, \"h1\", 1);\n        i0.ɵɵtext(3);\n        i0.ɵɵpipe(4, \"getLabel\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"div\", 2)(6, \"form\", 3);\n        i0.ɵɵtemplate(7, AccountsLoginComponent_div_7_Template, 3, 4, \"div\", 4);\n        i0.ɵɵelementStart(8, \"ul\", 5)(9, \"li\", 6)(10, \"span\", 7)(11, \"i\", 8);\n        i0.ɵɵtext(12, \"\\uE7FD\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"mat-form-field\");\n        i0.ɵɵelement(14, \"input\", 9);\n        i0.ɵɵpipe(15, \"getLabel\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(16, \"li\", 6)(17, \"span\", 7)(18, \"i\", 8);\n        i0.ɵɵtext(19, \"\\uE897\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"mat-form-field\");\n        i0.ɵɵelement(21, \"input\", 10);\n        i0.ɵɵpipe(22, \"getLabel\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(23, \"li\", 6)(24, \"span\", 7);\n        i0.ɵɵelement(25, \"i\", 8);\n        i0.ɵɵelementStart(26, \"div\", 11)(27, \"mat-checkbox\", 12);\n        i0.ɵɵlistener(\"change\", function AccountsLoginComponent_Template_mat_checkbox_change_27_listener($event) {\n          return ctx.rememberMe = $event.checked;\n        });\n        i0.ɵɵtext(28);\n        i0.ɵɵpipe(29, \"getLabel\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(30, \"input\", 13);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(31, \"li\", 6)(32, \"span\", 7);\n        i0.ɵɵelement(33, \"i\", 8);\n        i0.ɵɵelementStart(34, \"button\", 14);\n        i0.ɵɵtext(35);\n        i0.ɵɵpipe(36, \"getLabel\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(37, \"li\", 6)(38, \"span\", 7);\n        i0.ɵɵelement(39, \"i\", 8);\n        i0.ɵɵelementStart(40, \"a\", 15);\n        i0.ɵɵtext(41);\n        i0.ɵɵpipe(42, \"getLabel\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(43, \"li\", 6)(44, \"span\", 7);\n        i0.ɵɵelement(45, \"i\", 8);\n        i0.ɵɵelementStart(46, \"a\", 16);\n        i0.ɵɵtext(47);\n        i0.ɵɵpipe(48, \"getLabel\");\n        i0.ɵɵelementEnd()()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(4, 12, ctx.translations, \"plain.accounts.login.panel.login\"), \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"putFooterBottom\", 30);\n        i0.ɵɵadvance(1);\n        i0.ɵɵpropertyInterpolate1(\"action\", \"/accounts/login/session?next=\", ctx.previousPath, \"\", i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.error);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"placeholder\", i0.ɵɵpipeBind2(15, 15, ctx.translations, \"plain.accounts.login.panel.login\"));\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"placeholder\", i0.ɵɵpipeBind2(22, 18, ctx.translations, \"plain.accounts.login.panel.password\"));\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"checked\", ctx.rememberMe);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(29, 21, ctx.translations, \"plain.accounts.login.panel.remember_me\"), \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.rememberMe);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(36, 24, ctx.translations, \"plain.accounts.login.panel.login\"), \" \");\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(42, 27, ctx.translations, \"plain.accounts.login.panel.forgot_password\"), \" \");\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(48, 30, ctx.translations, \"plain.accounts.login.panel.not_a_member\"), \" \");\n      }\n    },\n    dependencies: [i2.NgIf, i3.CheckboxControlValueAccessor, i3.NgControlStatus, i3.NgModel],\n    encapsulation: 2\n  });\n  return AccountsLoginComponent;\n}();\nexport { AccountsLoginComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}